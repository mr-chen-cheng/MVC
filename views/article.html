<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/public/layui/css/layui.css">
</head>
<body class="layui-layout-body">
    <div class="layui-layout layui-layout-admin">
      {{include './common/header.html'}}
      
      {{include './common/side.html'}}
      
    <div class="layui-body">
        <!-- 内容主体区域 -->
      <div style="padding: 15px;">
        <h2>文章管理</h2>
        <table class="layui-hide" id="test" lay-filter="test"></table>
       </div>
       <script type="text/html" id="barDemo">
        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
      </script>
    </div>
      
      {{include './common/footer.html'}}
    </div>
    
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<script src="/public/layui/layui.all.js"></script>
<script src="/public/js/moment.js"></script>
<script src="/public/js/util.js"></script>
<script>

  
//JavaScript代码区域
layui.use(['element','layer','table','laydate'], function(){
  var element = layui.element;
  var table = layui.table;
  var laydate = layui.laydate
  table.render({
    elem: '#test'
    ,toolbar:'#toolbarDemo'
    ,title:'文章数据'
    ,url: '/artData' //数据接口
    ,page: true //开启分页
    ,defaultToolbar:['filter','exports','print',{
      title:'提示'
      ,layEvent:'LAYTABLE_TIPS'
      ,icon:'layui-icon-tips'
    }]
    ,cols: [[ //表头
      {type:'checkbox', fixed: 'left'}
      ,{field: 'art_id', title: 'ID', width:100}
      ,{field: 'title', title: '标题', width:120}
      ,{field: 'content', title: '内容', width:120} 
      ,{field: 'cat_id', title: '所属分类', width: 100}
      ,{field: 'author', title: '作者', width: 100}
      ,{field: 'cover', title: '图片', width: 120}
      ,{field: 'status', title: '状态', width: 100, sort: true,templet : function(item){
        console.log(item)
        let dataMap = {
          '2':'审核中',
          '1':'未发布',
          '0':'已发布'
        }
        return dataMap[item.status]
      }}
      ,{field:'publish_date', title:'发布时间', width:200, sort: true}
      ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:120}
    ]]
  });
});
</script>
</html>